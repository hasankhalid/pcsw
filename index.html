<!DOCTYPE html>
<html>
  <head>
    <link rel="icon" href="./resources/favicon.ico" type="image/x-icon" />
    <title>STRIDE Indicators</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.12/css/all.css" integrity="sha384-G0fIWCsCzJIMAVNQPfjH08cyYaUtMwjJwqiRKxxE/rx96Uroj1BtIQ6MLJuheaO9" crossorigin="anonymous">

    <link href="https://fonts.googleapis.com/css?family=Rubik:300,400,500,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">

    <script src="./selectize/js/standalone/selectize.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.7.0/d3.js"></script>
    <link rel="stylesheet" type="text/css" href="index.css">
    <link rel="stylesheet" type="text/css" href="animate.css">
    <link rel="stylesheet" type="text/css" href="./selectize/css/selectize.css">
  </head>

  <body>
    <div class="topbar">
      <div class="headingContain">
        <h2 class="topbarTitle">STRIDE logo</h2>
      </div>
        <div class="selectSection">
          <div class="selectContain">
            <p class="selectOption">Select Indicator</p>
            <select class="select" id="selectIndicator">
              <option value="">Select Indicator...</option>
            </select>
          </div>
          <div class="selectContain">
            <p class="selectOption">Select Indicator</p>
            <select class="select" id="selectIndicatorTwo">
              <option value="">Select Indicator...</option>
            </select>
          </div>
        </div>
      </div>
    </div>
    <div class="contentContainer">
      <div class="selectedIndicators">
        <p class="selectedInd">Selected Indicators: <span class="indicatorOne"></span><span class="join"> and </span><span class="indicatorTwo"></span></p>
        <p class="years">Showing comparison of for years 2017 and 2018</p>
      </div>
      <div class="flexContainer">
        <div class="firstHalf">
          <div class="mapContainer"><h2 class="sectionHeading" style="margin-bottom: 30px;">2018</h2>
            <div class="mapContain">
              <svg id="map2018">
              </svg>
            </div>
          </div>
        </div>
        <div class="categoryVisContain">
          <div class="mapContainer"><h2 class="sectionHeading" style="margin-bottom: 30px;">2017</h2>
            <div class="mapContain">
              <svg id="map2017">
              </svg>
            </div>
          </div>
        </div>
      </div>
      <p class="aboutStride">About STRIDE</p>
      <p class="strideDescription">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    </div>
    <footer class="footer">
      <div class="contentContainer">
        <p class="exploreSTRIDE">Explore the STRIDE Story</p>
        <div>
          <p>STRIDE is a project by I-SAPS</p>
        </div>
      </div>
    </footer>
    <script src="./map.js"></script>
    <script src="requiredData.js"></script>
    <script>

      initMapCreator()
      .then((mapObj)=>{
        window.mapObj = mapObj;

        var rIndicator = 'Overall score';
        var cIndicator = 'Drinking water';

        $('.indicatorOne').text(rIndicator);
        $('.indicatorTwo').text(cIndicator);

        mapObj.createMap('#map2018', mapObj.mapData.indicatorData2018, mapObj.mapData.kohatTehsilsGeoJSON, mapObj.mapData.indicatorData, rIndicator, cIndicator);
        mapObj.createMap('#map2017', mapObj.mapData.indicatorData2017, mapObj.mapData.kohatTehsilsGeoJSON, mapObj.mapData.indicatorData, rIndicator, cIndicator);

        var selectOptions = mapObj.mapData.indicators.map((d)=>{return {text : d, value : d}});
        
        select1 = $('#selectIndicator').selectize({
          sortField: 'text',
          options : selectOptions
        });

        var select2 = $('#selectIndicatorTwo').selectize({
            sortField: 'text',
            options : selectOptions
        });

        select1[0].selectize.setValue(rIndicator, true);
        select2[0].selectize.setValue(cIndicator, true);

        $('.select').on('change', changeIndicators);

        function changeIndicators(){
        
          var rIndicator = $('#selectIndicator').val();
          var cIndicator = $('#selectIndicatorTwo').val();

          $('.indicatorOne').text(rIndicator);
          $('.indicatorTwo').text(cIndicator);

          mapObj.createCircles('#map2018', mapObj.mapData.indicatorData2018, rIndicator, cIndicator, mapObj.mapData.indicatorData);

          mapObj.createCircles('#map2017', mapObj.mapData.indicatorData2017, rIndicator, cIndicator, mapObj.mapData.indicatorData);
        }
      });
      /*$('#selectIndicator').selectize({
          sortField: 'text'
      });
      $('#selectIndicatorTwo').selectize({
          sortField: 'text'
      });
      $('#categorySelect').selectize({
          sortField: 'text'
      });*/
    </script>
    <!--<script src="PunjabMap.js"></script>-->
  </body>
</html>
